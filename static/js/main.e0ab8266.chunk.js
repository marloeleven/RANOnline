(this["webpackJsonpreact-boiler-plate"]=this["webpackJsonpreact-boiler-plate"]||[]).push([[0],{154:function(e,t,a){e.exports=a(170)},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),i=a(14),s=a.n(i),c=a(61),o=a(135),m=a(139),u=a(132),d=a.n(u),f={sheetId:"1bd_TnHwz14F-0Lq6xnCY70b7VIWudhofzv_aTUsJt2w",returnAllResults:!0},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return new Promise((function(t,a){try{d()(Object(m.a)({},f,{},e),t)}catch(n){a(n)}}))},p=a(24),E=function(e){var t,a=Object(r.useState)("loading"),n=Object(p.a)(a,2),l=n[0],i=n[1],s=Object(r.useState)(),c=Object(p.a)(s,2),o=c[0],m=c[1],u=Object(r.useState)(new Promise((function(){}))),d=Object(p.a)(u,2),f=d[0],b=d[1];return t=function(){var t=e().then((function(e){m(e),i("success")})).catch((function(e){m(e),i("error")}));b(t)},Object(r.useEffect)((function(){return t()}),[]),{read:function(){switch(l){case"loading":throw f;case"error":throw o;case"success":default:return o}},result:o}},O=a(138),j=a(37),v=a(62),w=a(31),x=a(108),g=a(130),h=a(217),_=a(214),S=a(141),k=a(203),N=a(100),T=a(202),L=a(28),y=Object(v.b)({name:"app",initialState:{loggedIn:!1,accessToken:""},reducers:{setLoginState:function(e,t){var a=t.payload.accessToken;return Object(L.a)(e,(function(e){e.accessToken=a,e.loggedIn=!0}))}}}),C=y.actions.setLoginState,D=y.reducer,A=Object(h.a)((function(e,t){return e.pipe(Object(S.a)(C),Object(T.a)((function(){return Object(k.a)((function(){return Promise.resolve(!0)})).pipe(Object(T.a)((function(){return Object(N.a)()})))})))})),P=Object(v.b)({name:"boss",initialState:{bossList:[]},reducers:{setBossList:function(e,t){var a=t.payload;e.bossList=a}}}),M=(P.actions.setBossList,P.reducer),H=Object(h.a)(A),J=Object(w.a)(),R=(n=J,Object(j.c)({router:Object(x.b)(n),app:D,boss:M})),U=Object(_.a)(),I=Object(v.a)({middleware:[].concat(Object(O.a)(Object(v.c)()),[U,Object(g.a)(J)]),reducer:R});U.run(H);var F,B,G,K=a(133),Y=a(134),X=a(137),V=a(140),z=function(e){Object(V.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(Y.a)(a,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?l.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.log(e),{hasError:!0}}}]),a}(r.Component),W=a(204),q=a(110),Q=function(){return l.a.createElement("div",{className:"absolute top-0 h-full w-full flex justify-center items-center bg-black bg-opacity-50 flex-col"},l.a.createElement(W.a,null),l.a.createElement(q.a,{variant:"button",color:"inherit",className:"pt-4"},"Loading..."))},Z=a(213),$=a(56),ee=a(215);!function(e){e.ADMIN="admin",e.USER="user"}(F||(F={})),function(e){e.SG_CAMPUS="SG Campus",e.MP_CAMPUS="MP Campus",e.PNX_CAMPUS="PNX Campus",e.SG_HOLE="SG Hole",e.MP_HOLE="MP Hole",e.PNX_HOLE="PNX Hole",e.SHIBUYA="Shibuya",e.PY="Practicing Yard"}(B||(B={})),function(e){e.NORMAL="normal",e.BE_READY="be_ready",e.ACTIVE="active"}(G||(G={}));var te,ae=new Date,ne=[{id:"cjpy",name:"Cruel Jupiter (CJ)",map:B.PY,respawn_time:"8:00",last_killed:ae},{id:"nksgh",name:"Ninja Knife (NK)",map:B.SG_HOLE,respawn_time:"2:00",last_killed:ae},{id:"dssgh",name:"Dark Swordsman (DS)",map:B.SG_HOLE,respawn_time:"2:00",last_killed:ae},{id:"nksh",name:"Ninja Knife (NK)",map:B.SHIBUYA,respawn_time:"1:15",last_killed:ae},{id:"efsgh",name:"Etherial Fist (EF)",map:B.SG_HOLE,respawn_time:"2:00",last_killed:ae},{id:"efmph",name:"Etherial Fist (EF)",map:B.MP_HOLE,respawn_time:"2:00",last_killed:ae},{id:"efpxh",name:"Etherial Fist (EF)",map:B.PNX_HOLE,respawn_time:"2:00",last_killed:ae},{id:"dsjsgh",name:"Dark Swordsman Jr (DS jr)",map:B.SG_HOLE,respawn_time:"0:30",last_killed:ae},{id:"dsjmph",name:"Dark Swordsman Jr (DS jr)",map:B.MP_HOLE,respawn_time:"0:30",last_killed:ae},{id:"dsjpx",name:"Dark Swordsman Jr (DS jr)",map:B.PNX_HOLE,respawn_time:"0:30",last_killed:ae},{id:"dsjsgc",name:"Dark Swordsman Jr (DS jr)",map:B.SG_CAMPUS,respawn_time:"0:30",last_killed:ae},{id:"dsjmpc",name:"Dark Swordsman Jr (DS jr)",map:B.MP_CAMPUS,respawn_time:"0:30",last_killed:ae},{id:"dsjpxc",name:"Dark Swordsman Jr (DS jr)",map:B.PNX_CAMPUS,respawn_time:"0:30",last_killed:ae}],re=new Date,le=function(e){return"00".concat(e).slice(-2)},ie=re,se=("".concat(le((te=re).getHours()),":").concat(le(te.getMinutes())),function(e){var t=e.respawn_time,a=e.last_killed,n=t.split(":").map(Number),r=Object(p.a)(n,2),l=60*r[0]*60*1e3,i=60*r[1]*1e3;return new Date(a.getTime()+(l+i))}),ce=function(e){return JSON.parse(JSON.stringify(e))},oe=a(211),me=a(74),ue=a(218),de=a(208),fe=a(219),be=a(99),pe=a(209),Ee=a(210),Oe=new ue.a,je=Oe.pipe(Object(fe.a)(5e3),Object(be.a)((function(){return new Date})));Object(de.a)(5e3).subscribe((function(){return Oe.next()}));var ve=new ue.a;ve.pipe(Object(be.a)((function(e){return JSON.stringify(e)})),Object(pe.a)(),Object(fe.a)(5e3)).subscribe((function(e){window.localStorage.setItem("config",e)})),(new ue.a).pipe(Object(be.a)((function(e){return e})),Object(Ee.a)((function(e){var t=e.boss,a=e.time,n=new SpeechSynthesisUtterance("".concat(t.name," will spawn at ").concat(t.map," after ").concat(a," minutes"));return window.speechSynthesis.speak(n),Object(N.a)()}))).subscribe((function(){}));var we=function(e,t){var a=Object(r.useState)(1),n=Object(p.a)(a,2),l=n[0],i=n[1],s=Object(r.useState)(2),c=Object(p.a)(s,2),o=c[0],m=c[1],u=Object(r.useState)(G.NORMAL),d=Object(p.a)(u,2),f=d[0],b=d[1];return Object(r.useEffect)((function(){var t=se({respawn_time:e.respawn_time,last_killed:e.last_killed}),a=je.subscribe((function(e){var a=t.getTime()-e.getTime();if(a>=6e4){var n=Math.floor(a/6e4);if(n>=60){var r=Math.floor(n%60),l=Math.floor(n/60);return i(l),m(r),void b(G.NORMAL)}return i(0),m(Math.floor(n)),n<=5?void b(G.BE_READY):void b(G.NORMAL)}i(0),m(0),b(G.ACTIVE)}));return Oe.next(),function(){return a.unsubscribe()}}),[e.name,e.last_killed,e.respawn_time,t]),{hour:l,minute:o,status:f}},xe=Object($.a)((function(e){return{container:{minWidth:"400px"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:130}}}));function ge(e){var t=e.boss,a=xe(),n=Object(r.useContext)(Ce),i=we(t,n.serverTime),s=i.hour,c=i.minute,o=Object(r.useCallback)((function(e){n.updateKillTime(t.id,e)}),[t.id,n]),m=Object(r.useCallback)((function(){n.updateKillTime(t.id,new Date)}),[n,t.id]);return l.a.createElement("div",{className:Object(me.b)(a.container,"selected-record flex flex-row shadow-lg py-4 px-6 rounded-md")},l.a.createElement("ul",{className:"w-full"},l.a.createElement("li",{className:"text-xl"},t.name),l.a.createElement("li",{className:"text-xs text-gray-600"},"Respawn Time: ",t.respawn_time),l.a.createElement("li",{className:"text-xs text-gray-600"},t.map),l.a.createElement("li",{className:"mt-4"},l.a.createElement(oe.a,{label:"Last Killed",mask:"__:__ _M",value:t.last_killed,onChange:o,className:a.textField}))),l.a.createElement("div",{className:"right flex flex-col ml-8"},l.a.createElement("div",{className:"timer flex flex-row text-center mb-8"},l.a.createElement("ul",{className:"pr-2"},l.a.createElement("li",{className:"text-3xl"},le(s)),l.a.createElement("li",{className:"text-xs text-gray-600"},"hour")),l.a.createElement("ul",null,l.a.createElement("li",{className:"text-3xl"},le(c)),l.a.createElement("li",{className:"text-xs text-gray-600"},"minute"))),l.a.createElement(Z.a,{variant:"contained",color:"secondary",onClick:m},"Killed")))}var he=function(e){var t=Object(r.useContext)(Ce),a=we(e,t.serverTime),n=a.hour,i=a.minute,s=a.status;return l.a.createElement("div",{className:"selected-record flex flex-row shadow-sm py-4 px-6 rounded-md ".concat(s)},l.a.createElement("ul",{className:"mr-8  w-full"},l.a.createElement("li",{className:"text-sm"},e.name),l.a.createElement("li",{className:"text-xs text-gray-600"},e.map)),l.a.createElement("div",{className:"right flex flex-col ml-4"},l.a.createElement("div",{className:"timer flex flex-row text-center"},l.a.createElement("ul",{className:"pr-2"},l.a.createElement("li",{className:"text-xl"},le(n)),l.a.createElement("li",{className:"text-xs text-gray-600"},"hour")),l.a.createElement("ul",null,l.a.createElement("li",{className:"text-xl"},le(i)),l.a.createElement("li",{className:"text-xs text-gray-600"},"minute")))))},_e=Object($.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(0),marginRight:e.spacing(0),width:300,textAlign:"center"}}})),Se={id:"default",name:"Unknown",map:B.SHIBUYA,respawn_time:"0:00",last_killed:ie};function ke(e){var t=e.bossList,a=_e(),n=Object(r.useState)(Se.id),i=Object(p.a)(n,2),s=i[0],c=i[1],o=Object(r.useContext)(Ce),m=Object(r.useCallback)((function(){o.onResetAllTime()}),[o]),u=Object(r.useMemo)((function(){var e=t.find((function(e){return e.id===s}));return e||Se}),[t,s]),d=Object(r.useCallback)((function(e){e&&o.setServerTime(new Date(e))}),[o]);return Object(r.useEffect)((function(){t.length&&s===Se.id&&c(t[0].id)}),[t,s]),l.a.createElement("div",{className:"flex flex-col mt-2 ml-2"},l.a.createElement(ee.a,{label:"Server Up Time",inputVariant:"outlined",value:o.serverTime,onChange:d,className:a.textField}),l.a.createElement(Z.a,{variant:"contained",color:"primary",onClick:m,className:Ne},"Reset All Time"),l.a.createElement("div",{className:"flex flex-row mt-8"},l.a.createElement("div",{className:"flex flex-col mr-4"},l.a.createElement("h1",{className:"text-sm text-gray-600 mb-4"},"Selected Record"),l.a.createElement(ge,{boss:u}),l.a.createElement(Z.a,{variant:"contained",color:"default",onClick:function(){return o.onExport()},className:Ne},"Copy Local Data"),l.a.createElement("p",null,'Click "Copy Local Data", go to this'," ",l.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/1bd_TnHwz14F-0Lq6xnCY70b7VIWudhofzv_aTUsJt2w/edit#gid=0",target:"_blank",rel:"noopener noreferrer",className:Object(me.a)("color: blue")},"Google Sheet")," ","and paste the copied value in A2")),l.a.createElement("div",{className:"list"},l.a.createElement("h1",{className:"text-sm text-gray-600 mb-4"},"Boss Spawn List:"),l.a.createElement("ul",{className:"shadow-lg py-4 px-4"},function(e){return e.slice(0).sort((function(e,t){return se(e).getTime()-se(t).getTime()}))}(t).map((function(e){return l.a.createElement("li",{key:e.id,onClick:function(){return c(e.id)},className:Object(me.b)({selected:s===e.id})},l.a.createElement(he,e))}))))))}var Ne=Object(me.a)("\n  width: 150px;\n  margin-top: 10px !important;\n"),Te=a(136),Le=a(21),ye=a(87),Ce=l.a.createContext({serverTime:ie,setServerTime:ye.noop,updateKillTime:ye.noop,onExport:ye.noop,onResetAllTime:ye.noop}),De=function(e){var t=e.fetchBossList,a=Object(r.useState)(ie),n=Object(p.a)(a,2),i=n[0],s=n[1],c=Object(r.useState)([]),o=Object(p.a)(c,2),m=o[0],u=o[1],d=Object(r.useCallback)((function(e,t){u(Object(L.a)((function(a){var n=a.find((function(t){return t.id===e}));n&&(n.last_killed=new Date(t))})))}),[]),f=Object(r.useCallback)((function(){!function(e,t){var a=ce(e).map((function(e){return e.last_killed=new Date(e.last_killed).getTime(),e}));navigator.clipboard.writeText(JSON.stringify({serverTime:t.getTime(),bossList:a}))}(m,i)}),[m,i]),b=Object(r.useCallback)((function(){u(Object(L.a)((function(e){e.map((function(e){return e.last_killed=i,e}))})))}),[i]);return Object(r.useEffect)((function(){var e=t.result;if(e&&Array.isArray(e)&&e.length){var a=function(e){try{var t=JSON.parse(e);return{serverTime:new Date(t.serverTime),bossList:t.bossList.map((function(e){return e.last_killed=new Date(e.last_killed),e}))}}catch(a){return console.warn("error",a),{serverTime:re,bossList:ne}}}(e[0].config),n=function(){var e=window.localStorage.getItem("config")||"";try{var t=JSON.parse(e);return{serverTime:t.serverTime,bossList:t.bossList}}catch(a){return{serverTime:re,bossList:[]}}}();console.warn("config",a.serverTime,a);var r=a.serverTime,l=a.bossList.map((function(e){var t=n.bossList.find((function(t){return t.id===e.id}));if(t){var a=new Date(e.last_killed),r=new Date(t.last_killed);e.last_killed=a>r?a:r}return e}));s(r),u(l)}}),[t.result]),Object(r.useEffect)((function(){i&&m.length&&ve.next({serverTime:new Date(i).getTime(),bossList:ce(m).map((function(e){return e.last_killed=new Date(e.last_killed).getTime(),e}))})}),[i,m]),l.a.createElement(Ce.Provider,{value:{serverTime:i,setServerTime:s,updateKillTime:d,onExport:f,onResetAllTime:b}},l.a.createElement(Le.a,{utils:Te.a},l.a.createElement(ke,{bossList:m})))},Ae=(a(168),a(169),function(){var e=E(b);return l.a.createElement(l.a.StrictMode,null,l.a.createElement(z,null,l.a.createElement(o.a,{basename:"/"},l.a.createElement(c.a,{store:I},l.a.createElement(x.a,{history:J},l.a.createElement(r.Suspense,{fallback:l.a.createElement(Q,null)},l.a.createElement(De,{fetchBossList:e})))))))});s.a.render(l.a.createElement(Ae,null),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.e0ab8266.chunk.js.map